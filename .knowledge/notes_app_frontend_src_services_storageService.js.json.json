{"is_source_file": true, "format": "JavaScript", "description": "This file provides an abstraction layer over storage mechanisms for a notes application, supporting both localStorage and Supabase as backend options. It dynamically loads and manages a singleton client for Supabase, offers CRUD operations, and includes fallback mechanisms with graceful error handling.", "external_files": ["@supabase/supabase-js"], "external_methods": ["createClient"], "published": ["getStorageProvider", "localProvider", "supabaseProvider", "getStorageInfo"], "classes": [], "methods": [{"name": "getSupabase()", "description": "Dynamically imports the Supabase client and returns a singleton instance if available, disabling Supabase usage upon failure.", "scope": "", "scopeKind": ""}, {"name": "getStorageProvider()", "description": "Returns the current storage provider based on environment configuration, either Supabase or localStorage.", "scope": "", "scopeKind": ""}, {"name": "list()", "description": "Fetches all notes from the current storage, converting database rows into application note objects.", "scope": "supabaseProvider", "scopeKind": "class"}, {"name": "saveAll(notes)", "description": "Synchronizes a full list of notes to the storage backend, handling both local and Supabase options.", "scope": "supabaseProvider", "scopeKind": "class"}, {"name": "create(note)", "description": "Creates a new note record in the backend storage, if supported.", "scope": "supabaseProvider", "scopeKind": "class"}, {"name": "update(id, patch)", "description": "Updates an existing note record in the backend storage.", "scope": "supabaseProvider", "scopeKind": "class"}, {"name": "remove(id)", "description": "Deletes a note record from the backend storage.", "scope": "supabaseProvider", "scopeKind": "class"}, {"name": "getStorageInfo()", "description": "Returns a string indicating whether the current storage mode is 'Supabase' or 'Local Storage'.", "scope": "", "scopeKind": ""}, {"name": "toAppNote(row)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "toDbPatch(patch)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["import('@supabase/supabase-js').createClient", "localStorage.getItem", "localStorage.setItem", "console.error", "JSON.parse", "JSON.stringify", "new Date", "toAppNote", "toDbPatch", "sb.from", "sb.select", "sb.insert", "sb.update", "sb.delete", "sb.upsert"], "search-terms": ["storageService", "Supabase client singleton", "local storage fallback", "CRUD notes", "dynamic import", "notes table", "update_at timestamp handling"], "state": 2, "file_id": 16, "knowledge_revision": 50, "git_revision": "13f55feff66c91ffe231e20e9558589b6eb0cf52", "revision_history": [{"31": ""}, {"48": "13f55feff66c91ffe231e20e9558589b6eb0cf52"}, {"50": "13f55feff66c91ffe231e20e9558589b6eb0cf52"}], "ctags": [{"_type": "tag", "name": "SUPABASE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^const SUPABASE_KEY =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SUPABASE_URL", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^const SUPABASE_URL =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^        content: note.content || '',$/", "language": "JavaScript", "kind": "property", "scope": "supabaseProvider.create.row", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async create(note) {$/", "language": "JavaScript", "kind": "method", "signature": "(note)", "scope": "supabaseProvider", "scopeKind": "class"}, {"_type": "tag", "name": "getStorageInfo", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^export function getStorageInfo() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getStorageProvider", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^export function getStorageProvider() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSupabase", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^async function getSupabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^        id: note.id,$/", "language": "JavaScript", "kind": "property", "scope": "supabaseProvider.create.row", "scopeKind": "class"}, {"_type": "tag", "name": "isSupabaseConfigured", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^const isSupabaseConfigured = Boolean(SUPABASE_URL && SUPABASE_KEY);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "localProvider", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "supabaseProvider", "scopeKind": "class"}, {"_type": "tag", "name": "localProvider", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^export const localProvider = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async remove(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "supabaseProvider", "scopeKind": "class"}, {"_type": "tag", "name": "row", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^      const row = {$/", "language": "JavaScript", "kind": "class", "scope": "supabaseProvider.create", "scopeKind": "class"}, {"_type": "tag", "name": "saveAll", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async saveAll(notes) {$/", "language": "JavaScript", "kind": "method", "signature": "(notes)", "scope": "localProvider", "scopeKind": "class"}, {"_type": "tag", "name": "saveAll", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async saveAll(notes) {$/", "language": "JavaScript", "kind": "method", "signature": "(notes)", "scope": "supabaseProvider", "scopeKind": "class"}, {"_type": "tag", "name": "supabaseClient", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^let supabaseClient = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "supabaseProvider", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^export const supabaseProvider = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^        title: note.title || '',$/", "language": "JavaScript", "kind": "property", "scope": "supabaseProvider.create.row", "scopeKind": "class"}, {"_type": "tag", "name": "toAppNote", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^function toAppNote(row) {$/", "language": "JavaScript", "kind": "function", "signature": "(row)"}, {"_type": "tag", "name": "toDbPatch", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^function toDbPatch(patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(patch)"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^  async update(id, patch) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, patch)", "scope": "supabaseProvider", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-web-app-186776-186785/notes_app_frontend/src/services/storageService.js", "pattern": "/^        updated_at: new Date(note.updatedAt || Date.now()).toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "supabaseProvider.create.row", "scopeKind": "class"}], "hash": "86c0ce63cf780119c880b05d2e876063", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/services/storageService.js", "fields": [{"name": "content: note.content || '',", "scope": "supabaseProvider.create.row", "scopeKind": "class", "description": "unavailable"}, {"name": "id: note.id,", "scope": "supabaseProvider.create.row", "scopeKind": "class", "description": "unavailable"}, {"name": "let supabaseClient = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "title: note.title || '',", "scope": "supabaseProvider.create.row", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at: new Date(note.updatedAt || Date.now()).toISOString(),", "scope": "supabaseProvider.create.row", "scopeKind": "class", "description": "unavailable"}]}